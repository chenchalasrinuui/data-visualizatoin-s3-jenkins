pipeline {
  agent any
  environment {
        AZURE_CREDENTIALS_ID = 'azure-service-id'  // Use the ID you assigned in Jenkins
  }
  stages {
    stage('Install Dependencies') {
      steps {
        script {
          bat 'npm install'
        }
      }
    }

    stage('Build') {
      steps {
        script {
          bat 'npm run build'
        }
      }
    }

    stage('Deploy to Azure App Service') {
      steps {
                azureWebAppPublish azureCredentialsId: "${AZURE_CREDENTIALS_ID}", 
                                   resourceGroup: "jenkins", 
                                   appName: "MyReactAppJenkins", 
                                   filePath: 'dist/', 
                                   sourceDirectory: 'dist'
            }
        }

  }
}

