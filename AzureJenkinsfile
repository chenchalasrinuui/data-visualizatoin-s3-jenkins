pipeline {
  agent any
  environment {
        AZURE_CREDENTIALS_ID = 'azure-service-id'  // Use the ID you assigned in Jenkins
  }
  stages {
    stage('Install Dependencies') {
      steps {
        script {
          bat 'npm install'
        }
      }
    }

    stage('Build') {
      steps {
        script {
          bat 'npm run build'
        }
      }
    }

    stage('Deploy to Azure App Service') {
      steps {
          script {
               bat "az login --service-principal -u $AZURE_SP_USERN -p $AZURE_SP_PASSWORD --tenant $AZURE_TENANT_ID"
               bat "az webapp deployment source config-zip --resource-group $AZURE_RESOURCE_GROUP --name $AZURE_WEBAPP_NAME --src dist.zip"
            }
          }
        }

  }
}

